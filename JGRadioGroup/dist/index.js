!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";isc.ClassFactory.defineClass("JGRadioGroup","JGGroupItem"),isc.ClassFactory.mixInInterface("JGRadioGroup","IWindowAop"),isc.addGlobal("JGRadioGroup",isc.JGRadioGroup),isc.JGRadioGroup.addProperties({TableName:"",WidgetStyle:"JGBoxGroup",dropdownSourceHandler:function(){}}),isc.JGRadioGroup.addMethods({_initProperties:function(e){this.TitleTextAlign=e.LabelTextAlign,this.TitleVisible=e.LabelVisible,this.TitleWidth=e.LabelWidth,this.type="VRadioGroup",this.textField="",this.valueField="",e.IDColumnName?this.textField=e.IDColumnName:(this.IDColumnName="IDColumnName",this.textField="IDColumnName"),e.ColumnName?this.valueField=e.ColumnName:(this.valueField="ColumnName",this.ColumnName="ColumnName"),this.multiple=!1,e.TabIndex>=2&&(this.TabIndex=e.TabIndex-2),e.ColumnName?this.textField=e.ColumnName:(this.textField="ColumnName",this.ColumnName="ColumnName"),e.IDColumnName?this.valueField=e.IDColumnName:(this.IDColumnName="IDColumnName",this.valueField="IDColumnName"),this.NumCols=1,this.className+=" JGRadioGroup",this.items=[isc.addProperties(e,{type:"V3RadioGroupItems",isAbsoluteForm:!0})],this._observerDropdownSource()},_observerDropdownSource:function(){var e=this.getDropDownSource();if("object"!=typeof e)try{e=isc.JSON.decode(e)}catch(e){}if(e&&e.DataSourceSetting&&"Entity"==e.DataSourceSetting.DataSourceType){var t=e.DataSourceSetting.DataConfig.SourceName;if(t){var a=isc.JGDataSourceManager.get(this,t);if(a){var i=this;a.on(a.Events.LOAD,null,(function(){i.dropdownSourceHandler()})),a.on(a.Events.UPDATE,null,(function(){i.dropdownSourceHandler()})),a.on(a.Events.DELETE,null,(function(){i.dropdownSourceHandler()}))}}}},filterChanged:function(e){return e&&e.hasOwnProperty(this.IDColumnName)},setChecked:function(e,t){var a=this._form.getItem().itemForValue(e),i=a.getDataElement();return a.setElementValue(e),a.updateValue(),a._handleElementChanged(),i.checked=t},getBindFields:function(){return[this.IDColumnName,this.ColumnName]},setWidgetData:function(){this.Super("setWidgetData",arguments),this.hasErrors()&&this.values&&this.values[this.IDColumnName]&&""!=this.values[this.IDColumnName]&&(this.clearErrors(),this.redraw())},clearWidgetData:function(){this.Super("clearWidgetData",arguments);var e=this.getItems().last(),t=e&&e.items&&e.items[0];t&&t.setValue(null),this.hasErrors()&&this.values&&this.values[this.IDColumnName]&&""!=this.values[this.IDColumnName]&&(this.clearErrors(),this.redraw())},setDropDownSource:function(e){this.DropDownSource=e},getDropDownSource:function(){return this.DropDownSource},getIDColumnName:function(){return this.IDColumnName},getColumnName:function(){return this.ColumnName},setV3Value:function(e){var t=this.TableName;if(t){var a=[this.IDColumnName],i=t.getCurrentRecord(),o={};if(i||(i=t.createRecord(),t.insertRecords([i])),o.id=i.id,1==a.length)o[a[0]]=e;else if(a.length>1)for(var n=0,r=a.length;n<r;n++){var s=a[n];o[s]=e[s]}t.updateRecords([o])}},getDefaultValue:function(e){var t={},a=null,i=null;if("object"!=typeof(r=this.DropDownSource))try{r=isc.JSON.decode(r)}catch(e){}var o=r&&r.uiData;if(o&&o.length>0)for(var n=0;n<o.length;n++){var r;1==(r=o[n]).default&&(a=r.id,i=r.text)}return t[this.IDColumnName]=a,t[this.ColumnName]=i,t[e]},getConstData:function(e){var t,a=e.DataConfig;if(a)switch(e.DataSourceType){case"Entity":a.EntityConstData&&(t=a.EntityConstData.ConstData);break;case"TableQuery":a.SqlQueryConstData&&(t=a.SqlQueryConstData.ConstData);break;case"CustomConst":a&&(t=a.ConstData)}return t},setDefaultRecord:function(){var e=this.getDefaultValue();e&&this.setWidgetData(e)},getV3Value:function(){var e=this.getWidgetData();return e?e[this.IDColumnName]:""},getText:function(){var e=this.getWidgetData();return e?e[this.ColumnName]:""},beforeDataLoad:function(){this.BeforeDataLoadAction&&this.BeforeDataLoadAction()},getV3MethodMap:function(){return{getValue:"getV3Value",setValue:"setV3Value"}}})}));
