!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";isc.ClassFactory.defineClass("JGPercent","JGBaseWidget"),isc.ClassFactory.mixInInterface("JGPercent","IRecordObserver"),isc.ClassFactory.mixInInterface("JGPercent","JGStyleHelper"),isc.JGPercent.addProperties({FrontColor:null,FontColor:null,BgColor:null,Left:0,Width:100,ColumnName:null,TableName:null,Top:0,ValueFont:null,Height:0,Vertical:!1,Visible:!0,listener:["OnClick"],_progressBar:null,_percentDone:0}),isc.JGPercent.addMethods({_initWidget:function(){this.TableName&&this.TableName.addObserver&&this.TableName.addObserver(this),this.ValueFont=this.ValueFontStyle;var e="h_redstretch";"red-line"==this.FrontColor?e="h_redstretch":"orange-line"==this.FrontColor?e="h_orangestretch":"yellow-line"==this.FrontColor?e="h_yellowstretch":"green-line"==this.FrontColor?e="h_greenstretch":"blue-line"==this.FrontColor?e="h_bluestretch":"purple-line"==this.FrontColor?e="h_purplestretch":"pink-line"==this.FrontColor?e="h_pinkstretch":"brown-line"==this.FrontColor?e="h_brownstretch":"lightblue-line"==this.FrontColor&&(e="h_lightbluestretch"),this.className=this.WidgetStyle+"Normal",this._progressBar=isc.Progressbar.create({vertical:this.Vertical,length:this.Width,percentDone:this._percentDone,breadth:this.Height,showTitle:!1,skinImgDir:"[APP]/itop/common/images/progressbar/",title:"0%",click:this._referEvent(this,"OnClick"),horizontalItems:[{name:"h_start",size:0},{name:e,size:0},{name:"h_end",size:0},{name:"h_empty_start",size:0},{name:"h_emptystretch",size:0},{name:"h_empty_end",size:0}]}),this._label=isc.Label.create({height:this.Height,width:this.Width,align:"center",contents:"0%",showEdges:!1,canFocus:!1,showFocusOutline:!1,click:this._referEvent(this,"OnClick"),cssText:this.genFontCssText(this.ValueFont,this.FontColor)}),this.addChild(this._progressBar),this.addChild(this._label),this._initBindData()},_initBindData:function(){var e=this;isc.WidgetDatasource.addBindDatasourceCurrentRecordUpdateEventHandler(this,null,null,(function(t){var i=isc.WidgetDatasource.getSingleValue(e);e.setValue(i)}))},bindDataSource:function(e){},getValue:function(){return parseFloat(this._percentDone)},setValue:function(e){var t=Math.round(1e4*e)/100,i=this._progressBar;i.setPercentDone(t),i.setTitle(t+"%"),this._label.setContents(t+"%"),this._percentDone=e},setPercentWidth:function(e){this.Super("setPercentWidth",arguments),this._progressBar.setWidth("100%"),this._label.setWidth("100%")},setPercentHeight:function(e){this.Super("setPercentHeight",arguments),this._progressBar.setHeight("100%"),this._label.setHeight("100%")},destroy:function(){this._progressBar=null,this._label=null,this.Super("destroy",arguments)},setWidgetData:function(e){this.setValue(e)},clearWidgetData:function(){this.setValue(0)},getBindFields:function(){return[this.ColumnName]},getV3Value:function(){var e=isc.WidgetDatasource.getSingleValue(this);return null==e||null==e?"":e},setV3Value:function(e){iscWidgetDatasource.setSingleValue(this,e)},getVisible:function(){return this.isVisible()},getDefaultValue:function(){return isc.WidgetDatasource.getSingleColumnWidgetDefaultValue(this)},getV3MethodMap:function(){return{getValue:"getV3Value",setValue:"setV3Value"}}})}));
