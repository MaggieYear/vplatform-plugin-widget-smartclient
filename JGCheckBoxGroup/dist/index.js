!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";isc.ClassFactory.defineClass("JGCheckBoxGroup","JGGroupItem"),isc.ClassFactory.mixInInterface("JGCheckBoxGroup","IWindowAop"),isc.addGlobal("JGCheckBoxGroup",isc.JGCheckBoxGroup),isc.JGCheckBoxGroup.addProperties({TableName:"",WidgetStyle:"JGBoxGroup"}),isc.JGCheckBoxGroup.addMethods({_initProperties:function(e){this.TitleTextAlign=e.TitleTextAlign=e.LabelTextAlign,this.TitleVisible=e.TitleVisible=e.LabelVisible,this.TitleWidth=e.TitleWidth=e.LabelWidth,this.type="checkBoxGroup",this.multiple=!0,this.AutoWrap=!1,this.textField="",this.valueField="",e.ColumnName?this.textField=e.ColumnName:(this.textField="ColumnName",this.ColumnName="ColumnName"),e.IDColumnName?this.valueField=e.IDColumnName:(this.IDColumnName="IDColumnName",this.valueField="IDColumnName"),e.TabIndex>=2&&(this.TabIndex=e.TabIndex-2),this.NumCols=1,this.className+=" JGCheckBoxGroup";var t=this;this.items=[isc.addProperties(e,{type:"V3CheckBoxGroupItems",isAbsoluteForm:!0,getData:function(){return t.getDropDownSource()}})],this._observerDropdownSource()},_observerDropdownSource:function(){var e=this.getDropDownSource();if("object"!=typeof e)try{e=isc.JSON.decode(e)}catch(e){}if(e&&e.DataSourceSetting&&"Entity"==e.DataSourceSetting.DataSourceType){var t=e.DataSourceSetting.DataConfig.SourceName;if(t){var i=isc.JGDataSourceManager.get(this,t);if(i){var a=this;i.on(i.Events.LOAD,null,(function(){a.dropdownSourceHandler()})),i.on(i.Events.UPDATE,null,(function(){a.dropdownSourceHandler()})),i.on(i.Events.DELETE,null,(function(){a.dropdownSourceHandler()}))}}}},getBindFields:function(){return[this.IDColumnName,this.ColumnName]},filterChanged:function(e){return e&&e.hasOwnProperty(this.IDColumnName)},beforeDataLoad:function(){this.BeforeDataLoadAction&&this.BeforeDataLoadAction()},setWidgetData:function(){this.Super("setWidgetData",arguments),this.hasErrors()&&this.values&&this.values[widget.IDColumnName]&&""!=this.values[widget.IDColumnName]&&(this.clearErrors(),this.redraw())},clearWidgetData:function(){this.Super("clearWidgetData",arguments),this.hasErrors()&&this.values&&this.values[widget.IDColumnName]&&""!=this.values[widget.IDColumnName]&&(this.clearErrors(),this.redraw())},getDropDownSource:function(){return this.DropDownSource},setDropDownSource:function(e){this.DropDownSource=e},getIDColumnName:function(){return this.IDColumnName},getColumnName:function(){return this.ColumnName},getV3Value:function(){var e=this.getWidgetData();return e?e[this.IDColumnName]:""},setV3Value:function(e){var t=this.TableName;if(t){var i=t.getCurrentRecord(),a={};i||(i=t.createRecord(),t.insertRecords([i])),a.id=i.id,a[this.IDColumnName]=e,t.updateRecords([a])}},getSelectedItmesNum:function(){return this.values[this.IDColumnName]?this.SelectedItmesNum=this.values[this.IDColumnName].length:this.values.IDColumnName?this.SelectedItmesNum=this.values.IDColumnName.length:this.SelectedItmesNum=0,this.SelectedItmesNum},_getDefaultValue:function(){var e={},t=null,i=null;if(n=this.DropDownSource){if("object"!=typeof n)try{n=isc.JSON.decode(n)}catch(e){}var a=n.uiData;if(a)for(var o=0;o<a.length;o++){var n;if(1==(n=a[o]).default){t=n.id,i=n.text;break}}e[this.IDColumnName]=t,e[this.ColumnName]=i}return e},getDefaultValue:function(e){return this._getDefaultValue()[e]},getConstData:function(e){var t,i=e.DataConfig;if(i)switch(e.DataSourceType){case"Entity":i.EntityConstData&&(t=i.EntityConstData.ConstData);break;case"TableQuery":i.SqlQueryConstData&&(t=i.EntityConstData.ConstData);break;case"CustomConst":i&&(t=i.ConstData)}return t},setDefaultRecord:function(){var e=this._getDefaultValue();e&&this.setWidgetData(e)},getText:function(){var e=this.getWidgetData();return e?e[this.ColumnName]:""},getV3MethodMap:function(){return{getValue:"getV3Value",setValue:"setV3Value"}}})}));
