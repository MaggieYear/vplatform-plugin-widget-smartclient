!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";isc.ClassFactory.defineClass("JGTextBox","JGBaseFormWidget"),isc.JGTextBox.addProperties({IsMust:!1,LabelWidth:94,Height:26,TextLength:50,Visible:!0,ReadOnly:!1,Enabled:!0,TitleWidth:76,ColumnName:"columnName",WidgetStyle:"JGTextBox",listener:["OnValueLoaded","OnValueChanged","OnLabelClick","OnKeyDown","OnEnter","OnLeave"]}),isc.JGTextBox.addMethods({_initProperties:function(e){this.TitleWidth=this.LabelWidth,this.TitleVisible=this.LabelVisible,"JGTextBox"==this.WidgetStyle&&(this.WidgetStyle="JGForm");var t=this._decodeValueFormat(this.ValueFormat),i=t?t[0]:null,a=null!==i&&""!==i?i:null;this.items=[isc.addProperties(e,{type:"V3TextItems",isAbsoluteForm:!0,mask:a,maskBackUp:a})],this._initEventAndDataBind()},_initEventAndDataBind:function(){var e=this;isc.WidgetDatasource.addBindDatasourceCurrentRecordUpdateEventHandler(e,null,null,(function(t){isc.DataBindingUtil.setWidgetValue(e,t)})),isc.WidgetDatasource.addBindDatasourceCurrentRecordClearEventHandler(e,null,null,(function(){isc.DataBindingUtil.clearWidgetValue(e)})),isc.DatasourceUtil.addDatasourceLoadEventHandler(this,this.OnValueLoaded),isc.DatasourceUtil.addDatasourceFieldUpdateEventHandler(this,null,this.OnValueChanged)},_decodeValueFormat:function(e){if(!e||""===e)return null;var t=JSON.parse(e).ValueFormat,i=t?t.length:0;if(0===i)return null;for(var a="",n=",",l=[],r=-1,s=0;s<i;s++){var u=t[s],d=this._convertMaskRule(u);u.Valuelength&&u.Valuelength;if("FixedCharacter"===u.Type)r+=u.Value.length;else if("Separator"===u.Type){for(var o=0,c=u.Value.length;o<c;o++)n+=r+o+1+",";r+=u.Value.length}else r+=u.Valuelength;a+=d}return l.push(a),l.push(n),l},_convertMaskRule:function(e){var t="",i="",a="",n=e.Type,l=e.Value,r=e.ValueLimit,s=e.Valuelength;if("Lowercase"===r?i="<":"Upercase"===r&&(i=">"),"Digit"===n)for(var u=0;u<s;u++)t+="#";else if("AnyCharacter"===n)for(u=0;u<s;u++)t+=i+"C";else if("Character"===n)for(u=0;u<s;u++)t+=i+"[a-zA-Z]";else if("FixedCharacter"===n){u=0;for(var d=(o=l.split("")).length;u<d;u++)a+="\\"+o[u];t+=a}else if("Separator"===n){var o;for(u=0,d=(o=l.split("")).length;u<d;u++)a+="\\"+o[u];t+=a}return t},setItemValue:function(e){e=null!=e&&null!=e?e:"",this.items.last().setValue(e)},getBoundFieldNames:function(){return[this.ColumnName]},getBindFields:function(){return this.getBoundFieldNames()},destroy:function(){isc.EventHandler.clearWidgetRef(this.ID),this.Super("destroy",arguments)}})}));
