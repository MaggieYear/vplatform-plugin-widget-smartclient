!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";isc.ClassFactory.defineClass("JGBaseDictBox","JGBaseFormWidget"),isc.JGBaseDictBox.addProperties({IDColumnName:null,Top:0,Name:null,TabIndex:"",SimpleChineseTitle:"",ReadOnly:!1,Left:0,Height:50,IsMust:!1,ColumnName:null,DisplayFormat:null,Visible:!0,Enabled:!1,_form:null,listener:["keydown","change","focus","blur","titleClick","layerClck","iconClick"],WidgetStyle:"JGBaseDictBox"}),isc.JGBaseDictBox.addMethods({_initProperties:function(e){this.TitleWidth=e.LabelWidth,this.TitleVisible=e.LabelVisible,this.className+=" JGBaseDictBox",this.items=[isc.addProperties(e,{type:"V3BaseDictBoxItems",isAbsoluteForm:!0})],this._initEventAndDataBinding()},_filterData:function(e,t){for(var i={},n=0,a=e.length;n<a;n++){var s=e[n];t.hasOwnProperty(s)&&(i[s]=t[s])}return i.id=t.id,i},_initEventAndDataBinding:function(){var e=this;isc.WidgetDatasource.addBindDatasourceCurrentRecordUpdateEventHandler(this,null,null,(function(t){var i=e.getValues(),n={};i&&Object.assign(n,i);var a=e.getBindFields(),s=e._filterData(a,t);for(var l in s)s.hasOwnProperty(l)&&(n[l]=s[l]);e.setValues(n)})),isc.WidgetDatasource.addBindDatasourceCurrentRecordClearEventHandler(this,null,null,(function(){isc.DataBindingUtil.clearWidgetValue(e)})),isc.DatasourceUtil.addDatasourceLoadEventHandler(this,this.OnValueLoaded),isc.DatasourceUtil.addDatasourceFieldUpdateEventHandler(this,null,this.OnValueChanged)},showError:function(){},hideError:function(){},resized:function(e,t){if(this.Super("resized",arguments),"None"!=this.Dock){var i=this.getWidth(),n=this.TitleWidth,a=n&&n>0?i-n:i,s=this.getItems()[0];s&&(s.setWidth&&s.setWidth(a),s.items&&s.items[0]&&s.items.setWidth&&s.setWidth(a-2))}},getItem:function(e){var t=this.Super("getItem",arguments);return!t&&"id"==e&&this.IsEdit&&(t={isSetToDefaultValue:function(){}}),t},getBindFields:function(){return[this.IDColumnName,this.ColumnName]},setColumnName:function(e){var t={};t[this.ColumnName]=e,isc.WidgetDatasource.setSingleRecordMultiValue(this,t)},setIDColumnName:function(e){var t={};t[this.IDColumnName]=e,isc.WidgetDatasource.setSingleRecordMultiValue(this,t)},getIDColumnName:function(){return this.IDColumnName},getColumnName:function(){return this.ColumnName},getVal:function(e){var t=widgetDatasource.getSingleValue(this,e);if(t){var i=t[e];return null==i||null==i?"":i}return""},getText:function(){return this.getVal(this.ColumnName)},getV3IdValue:function(){return this.getVal(this.IDColumnName)},setV3Value:function(e){var t={};t[this.IDColumnName]=e,isc.WidgetDatasource.setSingleRecordMultiValue(this,t)},getDefaultValue:function(){var e={},t=null,i=null;if(s=this.DropDownSource){"object"!=typeof s&&(s=isc.JSON.decode(s));var n=s.uiData;if(n)for(var a=0;a<n.length;a++){var s;if(1==(s=n[a]).default){t=s.id,i=s.text;break}}e[widget.IDColumnName]=t,e[widget.ColumnName]=i}return e},setReadOnly:function(e){this._$readOnly=e,this.Super("setReadOnly",arguments)}})}));
